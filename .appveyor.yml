image: Visual Studio 2019

before_build:
- nuget restore
- dotnet tool install --global Codecov.Tool

build:
  project: BooruSharp.sln

test_script:
- dotnet test --collect:"XPlat Code Coverage"
- cd BooruSharp.UnitTests/TestResults
- cd $(ls -d */|head -n 1)
- cp coverage.cobertura.xml  ../../../coverage.xml
- cd ../../..
- codecov -f "coverage.xml"